<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Graph Boundary Test</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: #1a1a1a;
            color: white;
        }
        
        .test-section {
            margin: 20px 0;
            padding: 20px;
            background: #333;
            border-radius: 8px;
        }
        
        #graph-container {
            width: 100%;
            height: 400px;
            background: linear-gradient(45deg, #2a0845, #1a0530);
            border: 2px solid #8309D5;
            border-radius: 8px;
            position: relative;
            margin: 20px 0;
        }
        
        .instructions {
            background: #444;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        
        .status {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.8);
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <h1>ðŸ§ª Knowledge Graph Boundary Test</h1>
    
    <div class="instructions">
        <h3>Test Instructions:</h3>
        <ul>
            <li>Move your mouse over the purple bordered area (graph container)</li>
            <li>Move your mouse outside the purple bordered area</li>
            <li>Check that tooltips only appear when inside the container</li>
            <li>Verify no false positives occur outside the graph area</li>
        </ul>
    </div>
    
    <div class="test-section">
        <h3>Area OUTSIDE Graph Container</h3>
        <p>This text is outside the graph container. Moving your mouse here should NOT trigger any graph tooltips.</p>
    </div>
    
    <div id="graph-container">
        <!-- Graph will be rendered here -->
    </div>
    
    <div class="test-section">
        <h3>Another Area OUTSIDE Graph Container</h3>
        <p>This is also outside the graph container. No tooltips should appear when hovering here.</p>
    </div>
    
    <div class="status" id="status">
        Mouse: Outside container<br>
        Tooltip: Hidden
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // Simple test to verify boundary detection
        const container = document.getElementById('graph-container');
        const status = document.getElementById('status');
        
        // Track mouse position globally
        document.addEventListener('mousemove', (e) => {
            const containerRect = container.getBoundingClientRect();
            const isInside = (
                e.clientX >= containerRect.left &&
                e.clientX <= containerRect.right &&
                e.clientY >= containerRect.top &&
                e.clientY <= containerRect.bottom
            );
            
            status.innerHTML = `
                Mouse: ${isInside ? 'Inside container' : 'Outside container'}<br>
                Coords: (${e.clientX}, ${e.clientY})<br>
                Container: (${Math.round(containerRect.left)}, ${Math.round(containerRect.top)}) to (${Math.round(containerRect.right)}, ${Math.round(containerRect.bottom)})
            `;
        });
        
        // Test the container-specific event listeners
        container.addEventListener('mousemove', (e) => {
            console.log('âœ… Mouse move inside container:', e.clientX, e.clientY);
        });
        
        container.addEventListener('mouseleave', () => {
            console.log('ðŸšª Mouse left container');
        });
        
        container.addEventListener('mouseenter', () => {
            console.log('ðŸŽ¯ Mouse entered container');
        });
        
        // Add some visual feedback
        container.style.cursor = 'crosshair';
        container.addEventListener('mouseenter', () => {
            container.style.background = 'linear-gradient(45deg, #3a1855, #2a1540)';
        });
        
        container.addEventListener('mouseleave', () => {
            container.style.background = 'linear-gradient(45deg, #2a0845, #1a0530)';
        });
    </script>
</body>
</html>